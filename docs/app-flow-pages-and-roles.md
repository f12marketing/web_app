# **app-flow-pages-and-roles.md**

## **1\. Site Map (Top-Level Pages Only)**

### **Public**

* **Landing Page**  
   Overview, feature highlights, pricing, CTA to sign up.

* **Auth Pages (Clerk)**

  * Login

  * Signup

  * Password reset

  * Email verification

### **Authenticated**

* **Dashboard**  
   List of user projects, statuses, thumbnails.

* **Project Workspace (Continuous Scroll)**  
   The full creative pipeline in a single scroll:

  1. Idea

  2. Script

  3. Scenes

  4. Images

  5. Clips

  6. Transitions

  7. Music

  8. Voice-over

  9. Captions

  10. Preview

  11. Final Render

* **Billing & Account Settings** (Stripe \+ Clerk)  
   Upgrade plan, payment method, invoices.

* **Downloads / Final Files Page** (optional redirect)  
   Direct link to final rendered videos.

* **(Internal-only, not user-facing): Admin Panel**  
   *Exists for business operations, but per your instruction, regular users do not access it.*

---

## **2\. Purpose of Each Page (One Line Each)**

* **Landing Page**  
   Introduce the value, build confidence, drive signup.

* **Login / Signup**  
   Allow secure access via Clerk.

* **Dashboard**  
   Central hub to create, manage, duplicate, or delete projects.

* **Project Workspace**  
   The entire creative production pipeline in a single flow, enabling users to edit every step.

* **Billing & Account Settings**  
   Manage subscription tier, credits, receipts, and upgrades.

* **Downloads Page**  
   Provide an uncluttered location for final video access.

---

## **3\. User Roles & Access Levels**

### **User Roles**

**There is only one user role: “User”.**  
 All users (Free, Plus, Pro) share the same system-wide permissions, but their **plan tier** controls limits and features.

### **Plan-Based Capabilities**

| Capability | Free | Plus | Pro |
| ----- | ----- | ----- | ----- |
| Watermark | Yes | Optional | No |
| Models | Cheapest only | Medium tier | Full set |
| Clip Queue Priority | Low | Medium | High |
| Permanent Retention | No | Yes | Yes |
| Draft Retention | 15 days | Permanent | Permanent |
| Final Video Quality | 720p | 720p–1080p | 1080p |

(From the MASTER SPEC DOCUMENT)

### **Permissions Rules**

* Users can only view/manage their own projects.

* Users cannot access admin panel or other users’ data.

* Users cannot override tier limits.

---

## **4\. Primary User Journeys (max 3 steps each)**

### **A. Creating a New Video**

1. Dashboard → “Create Project”

2. Enter idea → System generates script and scenes

3. Scroll through pipeline: generate images → clips → transitions → music → voice-over → captions → final render

### **B. Editing a Specific Stage**

1. Scroll to stage (e.g., Scenes → Images → Clips)

2. Modify narration / prompts / model selection

3. Regenerate and continue down the flow

### **C. Rendering the Final Video**

1. Reach “Final Render” section

2. Click “Render Video”

3. Receive real-time updates → Download final MP4

### **D. Managing Subscription**

1. Account Settings

2. View plan → Click “Upgrade” → Stripe checkout

3. Updated tier unlocks features instantly

### **E. Returning to an Existing Project**

1. Dashboard → select project

2. Continue from last scrolled section

3. Render or revise any stage

---

## **5\. Detailed User Flow (Full Experience)**

(Aligned with the linear scroll in the specification)

### **1\. Landing → Signup**

* User views landing page

* Clicks "Get Started"

* Completes signup via Clerk

* Redirect: Dashboard

### **2\. Dashboard**

* User sees project list with thumbnails \+ statuses

* Can: create, rename, duplicate, delete

* Click project → enters workspace

### **3\. Workspace Sections (Continuous Scroll)**

Each is a “chapter” that flows seamlessly into the next:

#### **1\. Idea Section**

* Input: idea text field

* Settings: duration, aspect ratio, quality

* CTA: “Generate Script”

#### **2\. Script**

* Autogenerated via Fal.ai OpenRouter

* User can edit or regenerate

* CTA: “Generate Scenes”

#### **3\. Scenes**

* 20-scene breakdown (scaled by duration)

* Edit narration / image prompt / animation prompt

* CTA: “Generate Images”

#### **4\. Images**

* Select Fal.ai image model

* Generate per scene, upscale, variations

* Carousel UI

* CTA: “Generate Clips”

#### **5\. Clips**

* Per-scene video model selection

* 3s duration, motion strength settings

* Fal.ai API or FFmpeg fallback

* CTA: “Select Transitions”

#### **6\. Transitions**

* 31 templates (hover previews)

* Change transition per clip junction

* CTA: “Add Music”

#### **7\. Music**

* Pixabay search

* Audition via stream-only player

* Auto-sync to project duration

* CTA: “Generate Voice-over”

#### **8\. Voice-over**

* Uses full script → ElevenLabs TTS (via Fal.ai wrapper)

* Normalized volume

* CTA: “Create Captions”

#### **9\. Captions**

* Auto-generated

* User edits text

* Style presets (Modern, Bold, Cinematic, TikTok, Minimal)

* Burn-in toggle

* CTA: “Render Preview”

#### **10\. Preview**

* 480p low-res quick render

* Loop playback

* CTA: “Render Final Video”

#### **11\. Final Render**

* Spins up background worker

* Real-time progress updates

* Final MP4 saved to Backblaze

* Download button \+ share options

### **4\. Return Flow**

* User can revisit any stage at any time

* Changing any step invalidates downstream assets

* System politely warns \+ offers regeneration

---

## **6\. Interaction Patterns (High-Level Rules)**

### **Navigation**

* Workspace uses vertical scroll only

* Sticky header with quick jumps:

  * Script, Scenes, Images, Clips, Transitions, Music, VO, Captions, Preview, Render

### **Versioning**

* Every regenerate action produces a new version

* User can revert anytime

* Versions visible in side panel (drawer)

### **Saving**

* Autosave on every edit

* Manual save not required

### **Error Handling**

* Friendly messages following emotional guidelines:

   “Looks like something paused. Let’s retry together.”

### **Model Constraints**

* UI greys out unavailable models depending on tier

* Tooltip explains why

---

## **7\. Data Access Rules**

* All Supabase queries scoped by `user_id`

* All media URLs via signed Backblaze URLs

* Real-time updates via Supabase Realtime or Pusher

* Queue jobs can only modify projects they belong to

---

# **End of app-flow-pages-and-roles.md**

